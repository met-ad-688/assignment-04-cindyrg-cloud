<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Cindy Guzman">
<meta name="dcterms.date" content="2025-10-03">

<title>Assignment 04 - Lightcast Salary Prediction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="assignment04-Cindy-Guzman_files/libs/clipboard/clipboard.min.js"></script>
<script src="assignment04-Cindy-Guzman_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="assignment04-Cindy-Guzman_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="assignment04-Cindy-Guzman_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="assignment04-Cindy-Guzman_files/libs/quarto-html/popper.min.js"></script>
<script src="assignment04-Cindy-Guzman_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="assignment04-Cindy-Guzman_files/libs/quarto-html/anchor.min.js"></script>
<link href="assignment04-Cindy-Guzman_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="assignment04-Cindy-Guzman_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="assignment04-Cindy-Guzman_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="assignment04-Cindy-Guzman_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="assignment04-Cindy-Guzman_files/libs/bootstrap/bootstrap-e82aeceab8dc405a1e6035e722000702.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#executive-abstract" id="toc-executive-abstract" class="nav-link active" data-scroll-target="#executive-abstract"><span class="header-section-number">1</span> Executive Abstract</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Assignment 04 - Lightcast Salary Prediction</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Cindy Guzman </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Boston University
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 3, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">October 7, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="executive-abstract" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="executive-abstract"><span class="header-section-number">1</span> Executive Abstract</h2>
<p>This project builds and evaluates salary prediction models on Lightcast job-posting data. After enforcing sanity filters (positive salaries; non-negative experience), categorical fields were encoded and assembled for modeling. We trained four regressors—Generalized Linear Regression (GLR), Linear Regression, Polynomial Regression (quadratic in <code>MIN_YEARS_EXPERIENCE</code>), and Random Forest—and report test RMSE/MAE/R², along with coefficient/t-value summaries for interpretability. Artifacts are saved under <code>_output/</code>.</p>
<div id="a18d15d4" class="cell" data-execution_count="1">
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: kaleido in ./.venv/lib/python3.12/site-packages (1.1.0)
Requirement already satisfied: choreographer&gt;=1.0.10 in ./.venv/lib/python3.12/site-packages (from kaleido) (1.1.1)
Requirement already satisfied: logistro&gt;=1.0.8 in ./.venv/lib/python3.12/site-packages (from kaleido) (1.1.0)
Requirement already satisfied: orjson&gt;=3.10.15 in ./.venv/lib/python3.12/site-packages (from kaleido) (3.11.3)
Requirement already satisfied: packaging in ./.venv/lib/python3.12/site-packages (from kaleido) (25.0)
Requirement already satisfied: pytest-timeout&gt;=2.4.0 in ./.venv/lib/python3.12/site-packages (from kaleido) (2.4.0)
Requirement already satisfied: simplejson&gt;=3.19.3 in ./.venv/lib/python3.12/site-packages (from choreographer&gt;=1.0.10-&gt;kaleido) (3.20.2)
Requirement already satisfied: pytest&gt;=7.0.0 in ./.venv/lib/python3.12/site-packages (from pytest-timeout&gt;=2.4.0-&gt;kaleido) (8.4.2)
Requirement already satisfied: iniconfig&gt;=1 in ./.venv/lib/python3.12/site-packages (from pytest&gt;=7.0.0-&gt;pytest-timeout&gt;=2.4.0-&gt;kaleido) (2.1.0)
Requirement already satisfied: pluggy&lt;2,&gt;=1.5 in ./.venv/lib/python3.12/site-packages (from pytest&gt;=7.0.0-&gt;pytest-timeout&gt;=2.4.0-&gt;kaleido) (1.6.0)
Requirement already satisfied: pygments&gt;=2.7.2 in ./.venv/lib/python3.12/site-packages (from pytest&gt;=7.0.0-&gt;pytest-timeout&gt;=2.4.0-&gt;kaleido) (2.19.2)
[OK] Environment initialized</code></pre>
</div>
</div>
<div id="ca93666b" class="cell" data-execution_count="2">
<div class="cell-output cell-output-stderr">
<pre><code>[Stage 93:&gt;                                                         (0 + 1) / 1]                                                                                [Stage 94:&gt;                                                         (0 + 1) / 1]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[OK] Cleaned rows: 2243
[vars] y: SALARY
[vars] numeric: ['MAX_YEARS_EXPERIENCE', 'DURATION', 'SALARY_FROM', 'MIN_YEARS_EXPERIENCE']
[vars] categorical: ['COMPANY_NAME', 'LOT_V6_SPECIALIZED_OCCUPATION_NAME']</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>                                                                                </code></pre>
</div>
</div>
<div id="a7c97f78" class="cell" data-execution_count="3">
<div class="cell-output cell-output-stderr">
<pre><code>[Stage 97:&gt;                                                         (0 + 1) / 1]                                                                                [Stage 103:&gt;                                                        (0 + 1) / 1]                                                                                </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[OK] Pipeline fit complete
+--------+--------------------+-----------------------+------------------------------------------------------+-------------+
|label   |MIN_YEARS_EXPERIENCE|MIN_YEARS_EXPERIENCE_SQ|features                                              |features_poly|
+--------+--------------------+-----------------------+------------------------------------------------------+-------------+
|131100.0|2.0                 |4.0                    |(848,[0,1,2,3,37,839],[2.0,11.0,113400.0,2.0,1.0,1.0])|[2.0,4.0]    |
|136950.0|3.0                 |9.0                    |(848,[0,1,2,3,7,839],[3.0,28.0,115300.0,3.0,1.0,1.0]) |[3.0,9.0]    |
|136950.0|3.0                 |9.0                    |(848,[0,1,2,3,7,839],[3.0,28.0,115300.0,3.0,1.0,1.0]) |[3.0,9.0]    |
|104000.0|3.0                 |9.0                    |(848,[0,1,2,3,107,837],[3.0,8.0,104000.0,3.0,1.0,1.0])|[3.0,9.0]    |
|80000.0 |3.0                 |9.0                    |(848,[0,1,2,3,21,840],[3.0,37.0,60000.0,3.0,1.0,1.0]) |[3.0,9.0]    |
+--------+--------------------+-----------------------+------------------------------------------------------+-------------+
only showing top 5 rows</code></pre>
</div>
</div>
<div id="2ac628d2" class="cell" data-execution_count="4">
<div class="cell-output cell-output-stdout">
<pre><code>[OK] Pruned final_df columns: ['row_id', 'label', 'features', 'features_poly', 'MIN_YEARS_EXPERIENCE', 'MAX_YEARS_EXPERIENCE', 'DURATION', 'SALARY_FROM']</code></pre>
</div>
</div>
<div id="4350af26" class="cell" data-execution_count="5">
<div class="cell-output cell-output-stderr">
<pre><code>[Stage 110:&gt;                                                        (0 + 1) / 1]                                                                                [Stage 113:&gt;                                                        (0 + 1) / 1]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[OK] Split sizes: 1848 395</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>                                                                                </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>An 80/20 train–test split was used, this is a standard ratio for tabular regression data. It balances bias and variance by keeping sufficient training data while holding back a meaningful test sample for performance validation.</p>
</blockquote>
<div id="82a110e6" class="cell" data-execution_count="6">
<div class="cell-output cell-output-stderr">
<pre><code>25/10/07 01:01:51 WARN Instrumentation: [45784a35] regParam is zero, which might cause numerical instability and overfitting.
[Stage 116:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:01:55 WARN Instrumentation: [45784a35] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:01:56 WARN Instrumentation: [570296d9] regParam is zero, which might cause numerical instability and overfitting.
[Stage 117:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:02:00 WARN Instrumentation: [570296d9] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
[Stage 118:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:02:05 WARN Instrumentation: [10366c66] regParam is zero, which might cause numerical instability and overfitting.
[Stage 119:&gt;                                                        (0 + 1) / 1]                                                                                [Stage 120:&gt;                                                        (0 + 1) / 1]                                                                                [Stage 121:&gt;                                                        (0 + 1) / 1]                                                                                [Stage 122:&gt;                                                        (0 + 1) / 1]                                                                                [Stage 123:&gt;                                                        (0 + 1) / 1]                                                                                [Stage 125:&gt;                                                        (0 + 1) / 1][Stage 126:&gt;                                                        (0 + 1) / 1]                                                                                [Stage 127:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:02:34 WARN DAGScheduler: Broadcasting large task binary with size 1258.5 KiB
[Stage 129:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:02:36 WARN DAGScheduler: Broadcasting large task binary with size 2.0 MiB
[Stage 131:&gt;                                                        (0 + 1) / 1][Stage 132:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:02:38 WARN DAGScheduler: Broadcasting large task binary with size 3.2 MiB
[Stage 133:&gt;                                                        (0 + 1) / 1][Stage 134:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:02:42 WARN DAGScheduler: Broadcasting large task binary with size 4.7 MiB
[Stage 135:&gt;                                                        (0 + 1) / 1][Stage 136:&gt;                                                        (0 + 1) / 1]                                                                                </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[OK] All models trained</code></pre>
</div>
</div>
<div id="f3f4ea2f" class="cell" data-execution_count="7">
<div class="cell-output cell-output-stdout">
<pre><code>[OK] Expanded feature count = 846</code></pre>
</div>
</div>
<div id="9a2a412c" class="cell" data-execution_count="8">
<div class="cell-output cell-output-stdout">
<pre><code>[warn] Spark did not provide SE/t/p; estimating via bootstrap...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>25/10/07 01:02:47 WARN Instrumentation: [5c2b4ae6] regParam is zero, which might cause numerical instability and overfitting.
[Stage 137:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:02:53 WARN Instrumentation: [5c2b4ae6] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:02:53 WARN Instrumentation: [21bac3a6] regParam is zero, which might cause numerical instability and overfitting.
[Stage 138:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:02:58 WARN Instrumentation: [21bac3a6] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:02:59 WARN Instrumentation: [910f4803] regParam is zero, which might cause numerical instability and overfitting.
[Stage 139:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:04 WARN Instrumentation: [910f4803] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:05 WARN Instrumentation: [815c21eb] regParam is zero, which might cause numerical instability and overfitting.
[Stage 140:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:10 WARN Instrumentation: [815c21eb] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:10 WARN Instrumentation: [b9f3a3b1] regParam is zero, which might cause numerical instability and overfitting.
[Stage 141:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:16 WARN Instrumentation: [b9f3a3b1] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:16 WARN Instrumentation: [d7ab533b] regParam is zero, which might cause numerical instability and overfitting.
[Stage 142:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:22 WARN Instrumentation: [d7ab533b] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:22 WARN Instrumentation: [d9df0583] regParam is zero, which might cause numerical instability and overfitting.
[Stage 143:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:27 WARN Instrumentation: [d9df0583] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:27 WARN Instrumentation: [680a6b18] regParam is zero, which might cause numerical instability and overfitting.
[Stage 144:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:33 WARN Instrumentation: [680a6b18] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:33 WARN Instrumentation: [241a2b2a] regParam is zero, which might cause numerical instability and overfitting.
[Stage 145:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:38 WARN Instrumentation: [241a2b2a] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:39 WARN Instrumentation: [a1a1aa98] regParam is zero, which might cause numerical instability and overfitting.
[Stage 146:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:44 WARN Instrumentation: [a1a1aa98] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:45 WARN Instrumentation: [405cb6b6] regParam is zero, which might cause numerical instability and overfitting.
[Stage 147:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:50 WARN Instrumentation: [405cb6b6] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:51 WARN Instrumentation: [0063a8df] regParam is zero, which might cause numerical instability and overfitting.
[Stage 148:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:03:56 WARN Instrumentation: [0063a8df] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:03:56 WARN Instrumentation: [3376e950] regParam is zero, which might cause numerical instability and overfitting.
[Stage 149:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:01 WARN Instrumentation: [3376e950] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:02 WARN Instrumentation: [02c743c3] regParam is zero, which might cause numerical instability and overfitting.
[Stage 150:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:06 WARN Instrumentation: [02c743c3] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:07 WARN Instrumentation: [3024b2be] regParam is zero, which might cause numerical instability and overfitting.
[Stage 151:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:12 WARN Instrumentation: [3024b2be] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:13 WARN Instrumentation: [ab55fab0] regParam is zero, which might cause numerical instability and overfitting.
[Stage 152:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:18 WARN Instrumentation: [ab55fab0] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:18 WARN Instrumentation: [17398964] regParam is zero, which might cause numerical instability and overfitting.
[Stage 153:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:24 WARN Instrumentation: [17398964] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:24 WARN Instrumentation: [84ca5d31] regParam is zero, which might cause numerical instability and overfitting.
[Stage 154:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:28 WARN Instrumentation: [84ca5d31] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:29 WARN Instrumentation: [96670fd6] regParam is zero, which might cause numerical instability and overfitting.
[Stage 155:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:34 WARN Instrumentation: [96670fd6] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:35 WARN Instrumentation: [5a6ddfd6] regParam is zero, which might cause numerical instability and overfitting.
[Stage 156:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:40 WARN Instrumentation: [5a6ddfd6] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:40 WARN Instrumentation: [755dab59] regParam is zero, which might cause numerical instability and overfitting.
[Stage 157:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:46 WARN Instrumentation: [755dab59] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:46 WARN Instrumentation: [ac963eb3] regParam is zero, which might cause numerical instability and overfitting.
[Stage 158:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:51 WARN Instrumentation: [ac963eb3] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:51 WARN Instrumentation: [4a9596f9] regParam is zero, which might cause numerical instability and overfitting.
[Stage 159:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:04:56 WARN Instrumentation: [4a9596f9] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:04:57 WARN Instrumentation: [733e2e18] regParam is zero, which might cause numerical instability and overfitting.
[Stage 160:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:02 WARN Instrumentation: [733e2e18] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:02 WARN Instrumentation: [5b81237f] regParam is zero, which might cause numerical instability and overfitting.
[Stage 161:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:07 WARN Instrumentation: [5b81237f] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:08 WARN Instrumentation: [cc9f4391] regParam is zero, which might cause numerical instability and overfitting.
[Stage 162:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:12 WARN Instrumentation: [cc9f4391] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:12 WARN Instrumentation: [2feda97b] regParam is zero, which might cause numerical instability and overfitting.
[Stage 163:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:17 WARN Instrumentation: [2feda97b] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:17 WARN Instrumentation: [5c1454af] regParam is zero, which might cause numerical instability and overfitting.
[Stage 164:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:23 WARN Instrumentation: [5c1454af] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:23 WARN Instrumentation: [219f5780] regParam is zero, which might cause numerical instability and overfitting.
[Stage 165:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:28 WARN Instrumentation: [219f5780] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:29 WARN Instrumentation: [00e21f33] regParam is zero, which might cause numerical instability and overfitting.
[Stage 166:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:34 WARN Instrumentation: [00e21f33] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:34 WARN Instrumentation: [9257a983] regParam is zero, which might cause numerical instability and overfitting.
[Stage 167:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:39 WARN Instrumentation: [9257a983] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:40 WARN Instrumentation: [238c0463] regParam is zero, which might cause numerical instability and overfitting.
[Stage 168:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:45 WARN Instrumentation: [238c0463] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:45 WARN Instrumentation: [9ebe0be8] regParam is zero, which might cause numerical instability and overfitting.
[Stage 169:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:51 WARN Instrumentation: [9ebe0be8] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:51 WARN Instrumentation: [b6f76516] regParam is zero, which might cause numerical instability and overfitting.
[Stage 170:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:05:56 WARN Instrumentation: [b6f76516] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:05:57 WARN Instrumentation: [8f051e49] regParam is zero, which might cause numerical instability and overfitting.
[Stage 171:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:06:02 WARN Instrumentation: [8f051e49] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:06:02 WARN Instrumentation: [236eacdd] regParam is zero, which might cause numerical instability and overfitting.
[Stage 172:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:06:07 WARN Instrumentation: [236eacdd] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:06:08 WARN Instrumentation: [90e629a7] regParam is zero, which might cause numerical instability and overfitting.
[Stage 173:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:06:13 WARN Instrumentation: [90e629a7] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:06:13 WARN Instrumentation: [d6a2897b] regParam is zero, which might cause numerical instability and overfitting.
[Stage 174:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:06:19 WARN Instrumentation: [d6a2897b] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:06:19 WARN Instrumentation: [3bc33d75] regParam is zero, which might cause numerical instability and overfitting.
[Stage 175:&gt;                                                        (0 + 1) / 1]                                                                                25/10/07 01:06:24 WARN Instrumentation: [3bc33d75] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.
25/10/07 01:06:24 WARN Instrumentation: [3c95b081] regParam is zero, which might cause numerical instability and overfitting.
[Stage 176:&gt;                                                        (0 + 1) / 1]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Saved: _output/glr_summary.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>                                                                                25/10/07 01:06:29 WARN Instrumentation: [3c95b081] Cholesky solver failed due to singular covariance matrix. Retrying with Quasi-Newton solver.</code></pre>
</div>
</div>
<div id="3c2e2d74" class="cell" data-execution_count="9">
<div class="cell-output cell-output-stdout">
<pre><code>Saved: _output/polylr_summary.csv</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Interpretation (Polynomial LR). Adding a quadratic term in Min Yrs Exp does not improve generalization in this dataset; the linear term carries most of the signal. The small or non-significant t-value for the squared term suggests added variance with limited predictive value.</p>
</blockquote>
<div id="ab7e264c" class="cell" data-execution_count="10">
<div class="cell-output cell-output-stdout">
<pre><code>Saved: glr_significant/top_positive_t/top_negative_t
Saved: poly_significant/top_positive_t/top_negative_t</code></pre>
</div>
</div>
<div id="691383d7" class="cell" data-execution_count="11">
<div class="cell-output cell-output-stderr">
<pre><code>[Stage 177:&gt;                                                        (0 + 1) / 1][Stage 177:&gt;  (0 + 1) / 1][Stage 178:&gt;  (0 + 1) / 1][Stage 179:&gt;  (0 + 0) / 1]                                                                                [Stage 179:&gt;                                                        (0 + 1) / 1]                                                                                [Stage 180:&gt;                                                        (0 + 1) / 1]                                                                                [Stage 181:&gt;                                                        (0 + 1) / 1]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Saved: _output/metrics_table.csv
Saved: _output/predictions_clean.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>                                                                                </code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Model</th>
<th data-quarto-table-cell-role="th">RMSE</th>
<th data-quarto-table-cell-role="th">MAE</th>
<th data-quarto-table-cell-role="th">R2</th>
<th data-quarto-table-cell-role="th">AIC</th>
<th data-quarto-table-cell-role="th">BIC</th>
<th data-quarto-table-cell-role="th">logL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>GLR</td>
<td>7737.758101</td>
<td>5163.626094</td>
<td>0.953926</td>
<td>9892.516587</td>
<td>42929.874096</td>
<td>-18271.907796</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Linear</td>
<td>7737.758101</td>
<td>5163.626094</td>
<td>0.953926</td>
<td>9892.516587</td>
<td>13270.590602</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">3</th>
<td>RandomForest</td>
<td>11026.262059</td>
<td>8246.128017</td>
<td>0.906442</td>
<td>10168.309223</td>
<td>13538.425465</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2</th>
<td>Polynomial</td>
<td>27847.577892</td>
<td>22108.809590</td>
<td>0.403238</td>
<td>9212.217446</td>
<td>9224.154103</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="58b293e8" class="cell" data-execution_count="12">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="assignment04-Cindy-Guzman_files/figure-html/cell-13-output-1.png" width="1039" height="857" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Saved: _output/actual_vs_pred_2x2.png</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Interpretation (Model Comparison). All three models achieve similar predictive accuracy, with GLR and Random Forest showing the lowest RMSE and comparable R². The consistency across models implies the salary–experience–company relationship is largely linear, with minimal non-linear or interaction effects captured by the Random Forest.</p>
</blockquote>
<div id="be6c1588" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Saved: _output/glr_coefficients_ci.png</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Interpretation (GLR). Experience and the Salary Floor variable show the strongest positive association with salary, while several company/occupation levels contribute smaller adjustments around that baseline. Narrow confidence intervals and large absolute t-values indicate stable effects for the main drivers; wide intervals flag sparse categories where estimates are less certain.</p>
</blockquote>
<div id="c86b0f2a" class="cell" data-execution_count="14">
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_9706/1653157756.py:74: UserWarning:

set_ticklabels() should only be used with a fixed number of ticks, i.e. after set_ticks() or using a FixedLocator.
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="assignment04-Cindy-Guzman_files/figure-html/cell-15-output-2.png" width="1032" height="608" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Saved: _output/rf_feature_importance.png</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Interpretation (RF Importances). Random Forest also ranks Salary Floor and experience as the dominant predictors, with company and occupation dummies adding modest incremental lift. This mirrors the linear models and suggests the main structure is additive, with limited non-linear gains from tree splits.</p>
</blockquote>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>